# Apache .htaccess Configuration
# Handles URL migration from .html to clean URLs
# Upload this file to your site root

# Enable URL rewriting
RewriteEngine On
RewriteBase /

# Force HTTPS (recommended for security)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]

# Remove www (or add it - choose one)
RewriteCond %{HTTP_HOST} ^www\.thesalesguy\.com\.au [NC]
RewriteRule ^(.*)$ https://thesalesguy.com.au/$1 [R=301,L]

#---------------------------------------------------------------------------
# Redirect old .html URLs to new keyword-rich clean URLs
#---------------------------------------------------------------------------

# Service pages
Redirect 301 /sdr.html /sdr-sales-training/
Redirect 301 /ae.html /account-executive-training/

# Content pages
Redirect 301 /about.html /about/
Redirect 301 /resources.html /resources/
Redirect 301 /blog.html /blog/

# Blog posts - move to /blog/ folder
Redirect 301 /blog-4-life-changing-benefits-cold-calling.html /blog/cold-calling-benefits/
Redirect 301 /blog-overcome-call-reluctance.html /blog/overcome-call-reluctance/
Redirect 301 /blog-stop-chasing-vanity-metrics.html /blog/stop-chasing-vanity-metrics/

# Legal pages
Redirect 301 /privacy.html /privacy/
Redirect 301 /terms.html /terms/

#---------------------------------------------------------------------------
# Remove .html extension from URLs (users see /page, server loads page.html)
#---------------------------------------------------------------------------

# If the request is for a .html file
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^.]+)\.html\ HTTP
RewriteRule ^(.+)\.html$ /$1/ [R=301,L]

# If the request is for a page without extension, load the .html file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA]

# Add trailing slash to URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ https://thesalesguy.com.au/$1/ [R=301,L]

#---------------------------------------------------------------------------
# Performance & Security Headers
#---------------------------------------------------------------------------

# Enable GZIP compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Browser caching
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>
